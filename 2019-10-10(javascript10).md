## 13. 전역 변수의 문제점



### 1. 변수의 생명주기 

- 지역 변수

  자신의 지역 스코프와 하위 지역 스코프

- 전역 변수

  전역 스코프



### 2. 변수 호이스팅

- 정의 : 변수 선언이 스코프의 선두로 끌어 올려진 것처럼 동작하는 자바스크립트 고유의 특징
- 동작특징 : 변수 호이스팅은 스코프 단위로 동작



### 3. 진입점 = 시작점

- 정의 : 프로그램이 시작되는 지점



### 4. return  문

- 사용할 때 : 함수 몸체 내부에서만 사용할 수 있음.

- 주의점 : 전역에서 return 문쓰면 문법에러 발생 

​				-> 그러나 node.js에선 파일별로 독립된 스코프를 가지기 때문에 에러 발생 안함



### 5. var 키워드

- 특징 :
  1.  var 키워드로 선언한 전역변수는 전역 객체(window)의 프로퍼티가 됨
  2. 전역 객체는 웹 페이지가 종료하기 전까지 유효
  3. var 키워드로 선언한 전역 변수는 웹 페이지 종료할 때까지 유효



### 6. 전역 변수의 문제점

- 종류 : 
  1. 암묵적 결합
  2. 긴 생명 주기
  3. 스코프 체인 상에서 종점에 존재
  4. 네임 스페이스 오염



#### 6-1. 암묵적 결합

코드 어디서든지 전역 변수를 참조 할수 있음

여러 개발자가 코드를짜면 변수의 상태를 추적하기 힘들수 있음



#### 6-2. 긴 생명 주기

메모리 리소스를 오랜 기간 소비한다.



#### 6-3. 스코프 체인 상에서 종점에 존재

코드 상에서 변수의 참조가 일어났을때 참조하기 위해서 

3deep 스코프 -> 2deep 스코프 -> 1deep 스코프 -> 전역스코프 순으로 변수를 

찾아간다.

따라서 변수를 참조할때 그 변수가 전역스코프에 존재한다면 여러 단계를 거쳐서 찾아가야되니

변수 검색 속도가 가장 오래걸린다.



#### 6-4. 네임 스페이스 오염

자바스크립트는 파일이 분리되더라도 전역 스코프를 공유한다. 

따라서 파일1의 변수의 이름이 파일2의 변수에 있다면 예상치 못한 결과를 가져올 수 있음

 

### 7. 전역 변수 사용 억제 방법 

- 종류 : 
  1. 즉시 실행 함수
  2. 네임 스페이스 객체
  3. 모듈 패턴



#### 7-1. 즉시 실행 함수

즉시 실행 함수를 쓰면 전역변수가 아닌 지역변수를 쓰게됨 

왜냐하면 함수안에서 변수의 선언이 이루어지고 그 변수는 그 함수에서 선언이 이루어졌기때문에

함수가끝나면 변수의 생명은 끝나게됨. 즉 지역변수가 됨



#### 7-2. 네임 스페이스 객체

- 왜 쓸까? : 

  자바스크립트는 전역 스코프를 공유한다고 했다. 파일1에서 ‘Min’ 전역변수를 썼을때 파일2 에서 ‘Min’이라는 전역변수를 참조 할수 있다는것을 의미한다. 이러한 문제를 해결하기위해 객체 이름 파일1을 붙여서 파일1.Min이렇게 쓰게 하므로써 혼선을 막기위해 쓴다.



#### 7-3. 모듈 패턴

- 왜 쓸까? : 

  파일1에서 전역변수를 선언하면 파일2에서도 참조가 이루어질수 있다고 했다. 이러한 문제를 막기위해 아예 참조를 못하게 하는방법이다. 

- 제공하는것 : 외부에 공유하고 싶은 멤버와 그 안에서만 쓸수 있는 private 멤버를 구분할수 ㅣ있음